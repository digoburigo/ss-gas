---
description: Best practices for managing server state with React Query
globs: *.ts,*.tsx
alwaysApply: false
---
- Use TanStack Query for efficient server state management and data fetching.
- Implement strategic query keys and caching to optimize performance.
- Utilize the mutation API for handling side effects and optimistic UI updates.
- Implement comprehensive error handling and loading states for improved UX.
- Leverage React Query devtools for debugging and optimizing your queries.
- Use `useQuery` for fetching data and `useMutation` for data modifications.
- Implement proper error boundaries to handle query errors.
- Utilize query keys effectively for caching and refetching.
- Use `queryClient.invalidateQueries` to update stale data after mutations.
- Structure query keys hierarchically for better cache management
- Implement proper loading and error states for better UX
- Use optimistic updates for immediate feedback
- Handle errors gracefully with rollback mechanisms
- Leverage query key factories for maintainable code
- Test your queries with proper mocking
- Monitor performance with devtools and isFetching
- Use conditional queries to avoid unnecessary requests
- Implement strategic cache invalidation for data consistency
