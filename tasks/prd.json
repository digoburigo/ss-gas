{
  "name": "Natural Gas Contract Management System (SS-GAS)",
  "branchName": "feature/ss-gas-contracts",
  "userStories": [
    {
      "id": "US-001",
      "title": "Organization Management",
      "description": "As a Global Admin, I want to register organizations (client companies), so that each company can manage its own contracts and units",
      "acceptanceCriteria": [
        "Form with: Name, CNPJ (tax ID), address, primary contact",
        "Each organization is isolated (multi-tenant)",
        "Global Admin can activate/deactivate organizations",
        "Only users with the 'role' field on the User model (global admin) can create and manage organizations - NOT organization-scoped roles on the Member model"
      ],
      "priority": 1,
      "passes": true,
      "dependsOn": [],
      "labels": [
        "admin",
        "organization"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-002",
      "title": "Consumer Units CRUD",
      "description": "As a Contract Manager, I want to manage consumer units (metering points), to control each gas delivery point",
      "acceptanceCriteria": [
        "Fields: Name, meter code, address, linked contract, responsible parties (emails)",
        "Each unit represents 1 metering point",
        "Use ZenStack v3 TanStack Query on frontend",
        "ElysiaJS endpoints with Kysely for complex operations",
        "Validation: do not allow deletion of units with pending schedules"
      ],
      "priority": 1,
      "passes": true,
      "dependsOn": [
        "US-001"
      ],
      "labels": [
        "manager",
        "unit"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-003",
      "title": "Contract Upload and AI Extraction",
      "description": "As a Contract Manager, I want to upload contracts in PDF and automatically extract data, to speed up contract registration",
      "acceptanceCriteria": [
        "PDF/image contract upload",
        "AI extracts fields: supplier, contracted volume (DCQ), validity period, prices, flexibilities (take-or-pay, make-up gas, tolerances), adjustment clauses, penalties",
        "Side-by-side display: original PDF + form with extracted data",
        "User MUST review and confirm all fields before saving",
        "Low confidence fields highlighted in yellow"
      ],
      "priority": 2,
      "passes": true,
      "dependsOn": [
        "US-001",
        "US-004"
      ],
      "labels": [
        "manager",
        "contract",
        "ai"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-004",
      "title": "Manual Contract Registration",
      "description": "As a Contract Manager, I want to manually register/edit contracts, to enter contracts when automatic extraction is not sufficient",
      "acceptanceCriteria": [
        "Complete form with all contract fields",
        "Sections: Basic data, Volumes and flexibilities, Prices and adjustments, Penalties, Important events/dates",
        "Link multiple units to a contract",
        "Change history (audit log)"
      ],
      "priority": 1,
      "passes": true,
      "dependsOn": [
        "US-001"
      ],
      "labels": [
        "manager",
        "contract"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-005",
      "title": "Deadline Alert Configuration",
      "description": "As a Contract Manager, I want to configure alerts for important contract dates, to not miss critical deadlines",
      "acceptanceCriteria": [
        "Default events: contract expiration, renewal, scheduling deadlines, adjustment dates, take-or-pay expiration",
        "Customizable events per contract (name + date + recurrence)",
        "Configure alert advance notice (e.g., 30, 15, 7, 1 day before)",
        "Define responsible parties (emails) per alert"
      ],
      "priority": 2,
      "passes": true,
      "dependsOn": [
        "US-004"
      ],
      "labels": [
        "manager",
        "alert"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-006",
      "title": "Reminder Email Dispatch",
      "description": "As a System, I want to send automatic emails to responsible parties, to ensure deadlines are met",
      "acceptanceCriteria": [
        "Individual email per event (1 alert = 1 email)",
        "Template with: contract name, unit, event, date, required action",
        "Direct link to contract/unit in the system",
        "Log of sent emails (date, recipient, status)"
      ],
      "priority": 2,
      "passes": true,
      "dependsOn": [
        "US-005"
      ],
      "labels": [
        "system",
        "email",
        "alert"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-007",
      "title": "Daily Consumption Scheduling by Unit",
      "description": "As a Unit Operator, I want to register the daily gas volume schedule, to declare the expected consumption to the distributor",
      "acceptanceCriteria": [
        "Select unit and date",
        "Enter scheduled volume (m3 or MMBtu)",
        "Field for observations",
        "Validation against contract limits (DCQ, tolerances)",
        "Internal scheduling + declaration to distributor (DCQ)"
      ],
      "priority": 1,
      "passes": true,
      "dependsOn": [
        "US-002",
        "US-004"
      ],
      "labels": [
        "operator",
        "scheduling"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-008",
      "title": "Daily Scheduling Dashboard",
      "description": "As a Contract Manager, I want to view all units on the dashboard, to see who has already scheduled for the day and who has not",
      "acceptanceCriteria": [
        "Current day view",
        "List of all organization units",
        "Status per unit: Scheduled | Pending | Late",
        "Filters by contract, unit, status",
        "Visual highlight for pending units"
      ],
      "priority": 1,
      "passes": true,
      "dependsOn": [
        "US-007"
      ],
      "labels": [
        "manager",
        "dashboard"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-009",
      "title": "Actual Consumption Recording",
      "description": "As a Unit Operator, I want to record the actual measured consumption, to compare with the schedule and calculate accuracy",
      "acceptanceCriteria": [
        "Manual input of consumed volume (measurement)",
        "Reading date and time",
        "Automatic deviation calculation (scheduled vs actual)"
      ],
      "priority": 2,
      "passes": true,
      "dependsOn": [
        "US-007"
      ],
      "labels": [
        "operator",
        "consumption"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-010",
      "title": "Scheduling Accuracy Rate",
      "description": "As a Contract Manager, I want to view the accuracy rate per unit/period, to identify deviations and improve scheduling",
      "acceptanceCriteria": [
        "Calculation: (1 - |Scheduled - Actual| / Scheduled) x 100%",
        "Consider contract tolerances in analysis",
        "Deviation history by period (daily, weekly, monthly)",
        "Recordable cause analysis (weather, production, maintenance, etc.)",
        "Trend charts"
      ],
      "priority": 2,
      "passes": true,
      "dependsOn": [
        "US-009"
      ],
      "labels": [
        "manager",
        "analytics"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-011",
      "title": "Scheduling Deviation Alerts",
      "description": "As a System, I want to alert when deviation exceeds the configured threshold, so that corrective actions can be taken quickly",
      "acceptanceCriteria": [
        "Configurable threshold by Admin (e.g., deviation > 10%)",
        "Automatic email alert when threshold exceeded",
        "Visual indicator on dashboard",
        "Does not include automatic action suggestions (alert only)"
      ],
      "priority": 2,
      "passes": true,
      "dependsOn": [
        "US-009",
        "US-012"
      ],
      "labels": [
        "system",
        "alert"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-012",
      "title": "Administrative Parameter Panel",
      "description": "As an Admin, I want to configure system calculation parameters, to adjust business rules as needed",
      "acceptanceCriteria": [
        "Alert thresholds (deviation %, expiration advance notice)",
        "Penalty calculation formulas (take-or-pay, fines)",
        "Business rules by contract type",
        "Contract templates with default fields",
        "Customizable fields per organization",
        "Only Admin profile has access"
      ],
      "priority": 2,
      "passes": true,
      "dependsOn": [
        "US-001"
      ],
      "labels": [
        "admin",
        "settings"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-013",
      "title": "User Management by Organization",
      "description": "As an Admin/Contract Manager, I want to manage users and their permissions, to control who accesses what in the system",
      "acceptanceCriteria": [
        "User invitation by email",
        "Profile assignment (Admin, Manager, Operator, Viewer)",
        "Operator can be linked to specific units",
        "User deactivation (soft delete)"
      ],
      "priority": 1,
      "passes": true,
      "dependsOn": [
        "US-001"
      ],
      "labels": [
        "admin",
        "manager",
        "users"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-014",
      "title": "History and Audit Log",
      "description": "As an Admin, I want to view change history, to track who did what in the system",
      "acceptanceCriteria": [
        "Log of all write operations (create, update, delete)",
        "Record: user, date/time, entity, changed field, previous value, new value",
        "Filters by entity, user, period",
        "Log export"
      ],
      "priority": 3,
      "passes": true,
      "dependsOn": [
        "US-001"
      ],
      "labels": [
        "admin",
        "audit"
      ],
      "completionNotes": "Completed by agent"
    }
  ],
  "metadata": {
    "updatedAt": "2026-01-21T00:00:00.000Z"
  }
}